{"version":3,"sources":["webpack:///sw.js","webpack:///webpack/bootstrap 13c095c8d7bb6dd0823a","webpack:///./src/sw.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","modifyArrivalResponse","response","json","then","j","dataUsed","Trains","updateTime","Date","forEach","elem","push","DestinationCode","Min","newResponse","Response","JSON","stringify","headers","content-type","Promise","resolve","modifyTripResponse","StationToStationInfos","CompositeMiles","RailTime","cacheName","apiKey","pathApi","mapUrl","fontUrl","arriveApi","tripApi","self","addEventListener","event","waitUntil","caches","open","cache","addAll","concat","serviceWorkerOption","assets","request","url","startsWith","match","fetch","updated","put","clone","respondWith"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,IAGAV,EAAA,KDMM,SAASI,EAAQD,GAEtB,YEzBD,SAASQ,GAAsBC,GAC9B,MAAOA,GAASC,OAAOC,KAAK,SAAAC,GAC3B,GAAIC,IAAYC,UAAYC,WAAY,GAAIC,MAC5CJ,GAAEE,OAAOG,QAAQ,SAAAC,GAAA,MAAQL,GAASC,OAAOK,MACxCC,gBAAiBF,EAAKE,gBACtBC,IAAKH,EAAKG,OAEX,IAAMC,GAAc,GAAIC,UAASC,KAAKC,UAAUZ,IAC/Ca,SAAUC,eAAgB,qBAE3B,OAAO,IAAIC,SAAQ,SAAAC,GAAA,MAAWA,GAAQP,OAIxC,QAASQ,GAAmBrB,GAC3B,MAAOA,GAASC,OAAOC,KAAK,SAAAC,GAC3B,GAAIC,IAAYkB,yBAChBnB,GAAEmB,sBAAsBd,QAAQ,SAAAC,GAAA,MAAQL,GAASkB,sBAAsBZ,MACtEa,eAAgBd,EAAKc,eACrBC,SAAUf,EAAKe,YAEhB,IAAMX,GAAc,GAAIC,UAASC,KAAKC,UAAUZ,IAC/Ca,SAAUC,eAAgB,qBAE3B,OAAO,IAAIC,SAAQ,SAAAC,GAAA,MAAWA,GAAQP,OA7CxC,GAAMY,GAAY,QACZC,EAAS,mCACTC,6FAAqGD,EACrGE,EAAS,2EACTC,EAAU,iDACVC,EAAY,kEACZC,EAAU,iEAEhBC,MAAKC,iBAAiB,UAAW,SAAAC,GAC/BA,EAAMC,UACJC,OAAOC,KAAKZ,GAAWvB,KAAK,SAAAoC,GAC1B,MAAOA,GAAMC,QACZ,IACAZ,EACAC,EACAC,GACAW,OAAOR,KAAKS,oBAAoBC,cAiCvCV,KAAKC,iBAAiB,QAAS,SAASC,GACnCA,EAAMS,QAAQC,IAAIC,WAAWf,IAC9BM,OAAOC,KAAKZ,GAAWvB,KAAK,SAAAoC,GAC3BA,EAAMQ,MAAMZ,EAAMS,SAASzC,KAAK,SAAAF,GAC9B,MAAIA,IACH+C,MAAMb,EAAMS,SACXzC,KAAKH,GACLG,KAAK,SAAA8C,GACLV,EAAMW,IAAIf,EAAMS,QAASK,KAEnBhD,GAGD+C,MAAMb,EAAMS,SAClBzC,KAAKH,GACNG,KAAK,SAAAW,GAEH,MADAyB,GAAMW,IAAIf,EAAMS,QAAS9B,EAAYqC,SAC9BrC,QAMVqB,EAAMS,QAAQC,IAAIC,WAAWd,IAC/BK,OAAOC,KAAKZ,GAAWvB,KAAK,SAAAoC,GAC3BA,EAAMQ,MAAMZ,EAAMS,SAASzC,KAAK,SAAAF,GAC9B,MAAIA,GACIA,EAGD+C,MAAMb,EAAMS,SAClBzC,KAAKmB,GACNnB,KAAK,SAAAW,GAEH,MADAyB,GAAMW,IAAIf,EAAMS,QAAS9B,EAAYqC,SAC9BrC,QAMdqB,EAAMiB,YACJf,OAAOU,MAAMZ,EAAMS,SAASzC,KAAK,SAASF,GACxC,MAAOA,IAAY+C,MAAMb,EAAMS","file":"sw.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar cacheName = 'wmata';\n\tvar apiKey = '6b700f7ea9db408e9745c207da7ca827';\n\tvar pathApi = 'https://api.wmata.com/Rail.svc/json/jPath?FromStationCode=J03&ToStationCode=G05&api_key=' + apiKey;\n\tvar mapUrl = 'https://upload.wikimedia.org/wikipedia/commons/3/37/WMATA_system_map.svg';\n\tvar fontUrl = 'https://fonts.googleapis.com/css?family=Roboto';\n\tvar arriveApi = 'https://api.wmata.com/StationPrediction.svc/json/GetPrediction/';\n\tvar tripApi = 'https://api.wmata.com/Rail.svc/json/jSrcStationToDstStationInfo';\n\t\n\tself.addEventListener('install', function (event) {\n\t\tevent.waitUntil(caches.open(cacheName).then(function (cache) {\n\t\t\treturn cache.addAll(['/', pathApi, mapUrl, fontUrl].concat(self.serviceWorkerOption.assets));\n\t\t}));\n\t});\n\t\n\tfunction modifyArrivalResponse(response) {\n\t\treturn response.json().then(function (j) {\n\t\t\tvar dataUsed = { Trains: [], updateTime: new Date() };\n\t\t\tj.Trains.forEach(function (elem) {\n\t\t\t\treturn dataUsed.Trains.push({\n\t\t\t\t\tDestinationCode: elem.DestinationCode,\n\t\t\t\t\tMin: elem.Min\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar newResponse = new Response(JSON.stringify(dataUsed), {\n\t\t\t\theaders: { 'content-type': 'application/json' }\n\t\t\t});\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\treturn resolve(newResponse);\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction modifyTripResponse(response) {\n\t\treturn response.json().then(function (j) {\n\t\t\tvar dataUsed = { StationToStationInfos: [] };\n\t\t\tj.StationToStationInfos.forEach(function (elem) {\n\t\t\t\treturn dataUsed.StationToStationInfos.push({\n\t\t\t\t\tCompositeMiles: elem.CompositeMiles,\n\t\t\t\t\tRailTime: elem.RailTime\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar newResponse = new Response(JSON.stringify(dataUsed), {\n\t\t\t\theaders: { 'content-type': 'application/json' }\n\t\t\t});\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\treturn resolve(newResponse);\n\t\t\t});\n\t\t});\n\t}\n\t\n\tself.addEventListener('fetch', function (event) {\n\t\tif (event.request.url.startsWith(arriveApi)) {\n\t\t\tcaches.open(cacheName).then(function (cache) {\n\t\t\t\tcache.match(event.request).then(function (response) {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tfetch(event.request).then(modifyArrivalResponse).then(function (updated) {\n\t\t\t\t\t\t\tcache.put(event.request, updated);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn fetch(event.request).then(modifyArrivalResponse).then(function (newResponse) {\n\t\t\t\t\t\tcache.put(event.request, newResponse.clone());\n\t\t\t\t\t\treturn newResponse;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\n\t\tif (event.request.url.startsWith(tripApi)) {\n\t\t\tcaches.open(cacheName).then(function (cache) {\n\t\t\t\tcache.match(event.request).then(function (response) {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn fetch(event.request).then(modifyTripResponse).then(function (newResponse) {\n\t\t\t\t\t\tcache.put(event.request, newResponse.clone());\n\t\t\t\t\t\treturn newResponse;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\n\t\tevent.respondWith(caches.match(event.request).then(function (response) {\n\t\t\treturn response || fetch(event.request);\n\t\t}));\n\t});\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// sw.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 13c095c8d7bb6dd0823a","const cacheName = 'wmata';\r\nconst apiKey = '6b700f7ea9db408e9745c207da7ca827';\r\nconst pathApi = `https://api.wmata.com/Rail.svc/json/jPath?FromStationCode=J03&ToStationCode=G05&api_key=${apiKey}`\r\nconst mapUrl = 'https://upload.wikimedia.org/wikipedia/commons/3/37/WMATA_system_map.svg';\r\nconst fontUrl = 'https://fonts.googleapis.com/css?family=Roboto';\r\nconst arriveApi = 'https://api.wmata.com/StationPrediction.svc/json/GetPrediction/'\r\nconst tripApi = 'https://api.wmata.com/Rail.svc/json/jSrcStationToDstStationInfo'\r\n\r\nself.addEventListener('install', event => {\r\n  event.waitUntil(\r\n    caches.open(cacheName).then(cache => {\r\n      return cache.addAll([\r\n      \t'/',\r\n      \tpathApi,\r\n      \tmapUrl,\r\n      \tfontUrl\r\n    \t].concat(self.serviceWorkerOption.assets));\r\n    })\r\n  );\r\n});\r\n\r\nfunction modifyArrivalResponse(response) {\r\n\treturn response.json().then(j => {\r\n\t\tlet dataUsed = {Trains: [], updateTime: new Date()};\r\n\t\tj.Trains.forEach(elem => dataUsed.Trains.push({\r\n\t\t\tDestinationCode: elem.DestinationCode,\r\n\t\t\tMin: elem.Min\r\n\t\t}));\r\n\t\tconst newResponse = new Response(JSON.stringify(dataUsed), {\r\n\t\t\theaders: {'content-type': 'application/json'}\r\n\t\t});\r\n\t\treturn new Promise(resolve => resolve(newResponse));\r\n\t});\r\n}\r\n\r\nfunction modifyTripResponse(response) {\r\n\treturn response.json().then(j => {\r\n\t\tlet dataUsed = {StationToStationInfos: []};\r\n\t\tj.StationToStationInfos.forEach(elem => dataUsed.StationToStationInfos.push({\r\n\t\t\tCompositeMiles: elem.CompositeMiles,\r\n\t\t\tRailTime: elem.RailTime\r\n\t\t}));\r\n\t\tconst newResponse = new Response(JSON.stringify(dataUsed), {\r\n\t\t\theaders: {'content-type': 'application/json'}\r\n\t\t});\r\n\t\treturn new Promise(resolve => resolve(newResponse));\r\n\t});\r\n}\r\n\r\nself.addEventListener('fetch', function(event) {\r\n\tif (event.request.url.startsWith(arriveApi)) {\r\n    caches.open(cacheName).then(cache => {\r\n    \tcache.match(event.request).then(response => {\r\n\t      if (response) {\r\n\t      \tfetch(event.request)\r\n\t      \t.then(modifyArrivalResponse)\r\n\t      \t.then(updated => {\r\n\t      \t\tcache.put(event.request, updated);\r\n\t      \t});\r\n\t      \treturn response;\r\n\t      }\r\n\r\n\t      return fetch(event.request)\r\n\t      .then(modifyArrivalResponse)\r\n\t    \t.then(newResponse => {\r\n\t        cache.put(event.request, newResponse.clone());\r\n\t        return newResponse;\r\n\t  \t\t});\r\n\t    });\r\n    });\r\n  }\r\n\r\n  if (event.request.url.startsWith(tripApi)) {\r\n    caches.open(cacheName).then(cache => {\r\n    \tcache.match(event.request).then(response => {\r\n\t      if (response) {\r\n\t      \treturn response;\r\n\t      }\r\n\r\n\t      return fetch(event.request)\r\n\t      .then(modifyTripResponse)\r\n\t    \t.then(newResponse => {\r\n\t        cache.put(event.request, newResponse.clone());\r\n\t        return newResponse;\r\n\t  \t\t});\r\n\t    });\r\n    });\r\n  }\r\n\r\n  event.respondWith(\t\r\n    caches.match(event.request).then(function(response) {\r\n      return response || fetch(event.request);\r\n    })\r\n  );\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/sw.js"],"sourceRoot":""}